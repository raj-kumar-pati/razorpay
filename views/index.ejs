<!DOCTYPE html>
<html>
<head>
  <title>Razorpay Payment</title>
</head>
<body>
  <h1>Pay with Razorpay</h1>
  <button id="rzp-button1">Pay â‚¹5</button>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    document.getElementById("rzp-button1").onclick = async function (e) {
      e.preventDefault();

      const response = await fetch("/order", { method: "POST" });
      const data = await response.json();

      const options = {
        "key": "<%= process.env.RAZORPAY_KEY_ID %>", // Can also inject via server
        "amount": data.amount,
        "currency": data.currency,
        "name": "My Razorpay App",
        "description": "Test Transaction",
        "order_id": data.id,
        "handler": function (response) {
          alert("Payment successful!");
          console.log(response);
        },
        "theme": {
          "color": "#3399cc"
        }
      };

      const rzp = new Razorpay(options);
      rzp.open();
    };
  </script>
</body>
</html>
